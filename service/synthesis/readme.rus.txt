Балаболка (консольное приложение для использования онлайн-сервисов синтеза речи), версия 1.37
Copyright (с) 2019-2022 Илья Морозов
Все права защищены

WWW: http://balabolka-tts.ru/bweb.html
E-mail: crossa@list.ru

Тип лицензии: Freeware
Операционная система: Microsoft Windows 7/8/10/11

Консольное приложение позволяет использовать онлайн-сервисы для синтеза речи:
- Google TTS;
- Amazon Polly;
- Baidu TTS;
- IBM Watson TTS;
- Microsoft Azure;
- Naver TTS;
- Youdao TTS.
Все сервисы предоставляют бесплатный доступ для пользователей. Но нет гарантии, что этот бесплатный доступ не будет прекращен в любой момент.

Программа позволяет конвертировать текст в речь, а также преобразовать субтитры в речь (с соблюдением указанных внутри субтитров временных меток).



*** Командная строка ***

bal4web [параметры ...]


*** Параметры командной строки ***

-s <имя_сервиса>
   Выбрать онлайн-сервис для синтеза речи ("google" или "g", "amazon" или "a", "baidu" или "b", "ibm" или "i", "microsoft" или "m", "naver" или "n", "youdao" или "y"). По умолчанию значение равно "google".

-l <идентификатор_языка>
   Выбрать язык для синтеза речи. Идентификатор представляет собой комбинацию кода языка по стандарту ISO 639 (две маленькие буквы) и кода по стандарту ISO 3166 (две большие буквы), объединенных дефисом.
   Например: en-US, de-DE, ru-RU. По умолчанию значение равно "en-US" (этот язык поддерживается всеми онлайн-сервисами).

-g <пол>
   Выбрать пол голоса для синтеза речи (если онлайн-сервис поддерживает такой параметр). Женский пол: "female" или "f". Мужской пол: "male" или "m". Значение по умолчанию отсутствует; онлайн-сервис сам выберет пол голоса для каждого языка.
   Параметр поддерживают сервисы Google TTS, Amazon Polly, IBM Watson TTS.

-n <имя_голоса>
   Указать имя голоса для синтеза речи (если онлайн-сервис поддерживает такой параметр). Значение по умолчанию отсутствует; онлайн-сервис сам выберет голос для каждого языка.
   Параметр поддерживают сервисы Amazon Polly, IBM Watson TTS и Microsoft Azure.

-r <число>
   Установить скорость речи (если онлайн-сервис поддерживает такой параметр). По умолчанию значение равно "1.0" (средняя скорость человеческой речи).
   Для Google TTS и Microsoft Azure значения находятся в диапазоне от "0.1" до "3.0".
   Для Naver TTS значения находятся в диапазоне от "0.5" до "1.5".

-v <целое_число>
   Установить громкость в диапазоне от 0 до 200 (по умолчанию значение равно 100).

-m
   Показать список языков, поддерживаемых онлайн-сервисом, а также перечислить дополнительные характеристики голосов для каждого языка (если есть).

-f <имя_файла>
   Открыть текстовый файл. Командная строка может содержать несколько параметров [-f].

-fl <имя_файла>
   Открыть файл со списком текстовых файлов (по одному имени файла на каждой строке). Командная строка может содержать несколько параметров [-fl].

-w <имя_файла>
   Записать звуковой файл в формате WAV.

-c
   Использовать текст из буфера обмена.

-t <текст>
   Использовать текст из командной строки. Командная строка может содержать несколько параметров [-t].

-i
   Использовать текст из стандартного потока ввода (STDIN).

-o
   Записать аудиоданные в стандартный поток вывода (STDOUT); если параметр задан, параметр [-w] игнорируется.

--encoding <кодировка> или -enc <кодировка>
   Кодировка текста из стандартного потока ввода ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

-ln <число>
   Выбрать строку из текстового файла, используя её номер. Нумерация строк начинается с "1".
   Для выбора нескольких строк можно указать номера начальной и конечной строк в тексте (например, "26-34").
   Командная строка может содержать несколько параметров [-ln].

-e <число>
   Установить длину пауз между предложениями (в миллисекундах). Значение должно быть меньше 5000. Если параметр не задан, сервис будет использовать паузы между предложениями по умолчанию.
   Параметр поддерживает сервис Microsoft Azure.

-d <имя_файла>
   Применить к тексту правила для коррекции произношения из словаря (файла с расширением *.BXD, *.DIC или *.REX). Командная строка может содержать несколько параметров [-d].
   Пользователь может редактировать словарь в приложении "Балаболка".

-lrc
   Создать файл формата LRC. Текст в файле будет синхронизирован с речью в созданном звуковом файле.

-srt
   Создать файл формата SRT. Субтитры в файле будет синхронизирован с речью в созданном звуковом файле.

-sub
   Текст представляет собой субтитры и должен быть преобразован в звуковой файл с учетом заданных интервалов времени.
   Параметр может быть полезен в тех случаях, когда в командной строке заданы параметры [-i] или [-c].

-host <адрес>
   Указать адрес прокси-сервера.

-port <число>
   Указать порт прокси-сервера.

-dp
   Показать индикатор прогресса выполнения в окне консольного приложения.

--ignore-square-brackets или -isb
   Игнорировать текст в [квадратных скобках].

--ignore-curly-brackets или -icb
   Игнорировать текст в {фигурных скобках}.

--ignore-angle-brackets или -iab
   Игнорировать текст в <угловых скобках>.

--ignore-round-brackets или -irb
   Игнорировать текст в (круглых скобках).

--ignore-url или -iu
   Игнорировать URL-адреса.

--ignore-comments или -ic
   Игнорировать комментарии в тексте. Однострочные комментарии начинаются с // и продолжаются до конца строки. Многострочные комментарии начинаются с /* и завершаются */.

-h
   Показать описание параметров командной строки.

--lrc-length <число>
   Установить максимальную длину строк для файла формата LRC (в символах).

--lrc-fname <имя_файла>
   Имя файла формата LRC, который будет создан. Параметр может быть полезен в тех случаях, когда в командной строке задан параметр [-o].

--lrc-enc <кодировка>
   Кодировка файла формата LRC ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

--lrc-offset <число>
   Задать сдвиг времени для файла формата LRC (в миллисекундах).

--lrc-artist <текст>
   Тег для файла формата LRC: исполнитель произведения.

--lrc-album <текст>
   Тег для файла формата LRC: альбом.

--lrc-title <текст>
   Тег для файла формата LRC: название произведения.

--lrc-author <текст>
   Тег для файла формата LRC: автор.

--lrc-creator <текст>
   Тег для файла формата LRC: создатель файла.

--lrc-sent
   Вставить пустые строки после предложений при создании файла формата LRC.

--lrc-para
   Вставить пустые строки после абзацев при создании файла формата LRC.

--srt-length <число>
   Установить максимальную длину строк для файла формата SRT (в символах).

--srt-fname <имя_файла>
   Имя файла формата SRT, который будет создан. Параметр может быть полезен в тех случаях, когда в командной строке задан параметр [-o].

--srt-enc <кодировка>
   Кодировка файла формата SRT ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

--raw
   Записать аудиоданные в формате RAW PCM; данные не содержат заголовок формата WAV. Параметр используется совместно с параметром [-o].

--ignore-length или -il
   Не записывать размер аудиоданных в заголовок формата WAV. Параметр используется совместно с параметром [-o].

--sub-format <текст>
   Формат субтитров ("srt", "lrc", "ssa", "ass", "smi" или "vtt"), которые необходимо преобразовать в речь. Если параметр не задан, формат будет определен по расширению имени входного файла субтитров.

--sub-fit или -sf
   При преобразовании субтитров в речь автоматически увеличивать скорость речи для того, чтобы уложиться в заданные интервалы времени.
   Параметр поддерживают сервисы Google TTS и Naver TTS.


*** Примеры ***

Создать текстовый файл со списком языков, поддерживаемых онлайн-сервисом Google TTS:

bal4web -s Google -m > language.txt


Преобразовать текстовый файл BOOK.TXT в звуковой файл BOOK.WAV:

bal4web -f "d:\Text\book.txt" -w "d:\Sound\book.wav" -s Google -l ru-RU -g female


Преобразовать файл субтитров MOVIE.SRT в звуковой файл MOVIE.WAV:

bal4web -f "d:\Subtitles\movie.srt" -w "d:\Sound\movie.wav" -s Microsoft -l ru-RU -n SvetlanaNeural -r 1.1


Пример использования приложения совместно с утилитой LAME.EXE:

bal4web -f d:\book.txt -s Baidu -l ru-RU -o --raw | lame -r -s 16 -m m -h - d:\book.mp3


Пример использования приложения совместно с утилитой OGGENC2.EXE:

bal4web -f d:\book.txt -s Baidu -l ru-RU -o -il | oggenc2 --ignorelength - -o d:\book.ogg


*** Файл конфигурации ***

Параметры можно сохранить как файл конфигурации "bal4web.cfg" в той же папке, что и консольное приложение.

Пример содержимого файла:
===============
-f d:\Text\book.txt
-w d:\Sound\book.wav
-s Google
-l de-DE
-g female
-d d:\Dict\rules.bxd
-lrc
--lrc-length 75
--lrc-enc utf8
===============

Программа может комбинировать параметры из файла конфигурации и командной строки.


*** Аудиоклипы ***

Программа позволяет вставлять ссылки на внешние звуковые файлы форматов WAV и MP3 (аудиоклипы) в текст. Тег вставки аудиоклипа будет выглядеть так:

{{Audio=C:\Sounds\ring.wav}}

При записи речи в файл программа вставит аудиоданные из внешнего звукового файла внутрь нового файла.


*** Тег "Lang" ***

Если требуется сменить язык при выполнении синтеза речи, можно использовать специальный тег:

Read the English text. {{Lang=ru-RU}} Прочти текст на русском языке.

Область действия тега распространяется до следующего тега или до конца текста.

Для сервиса Google TTS внутри тега можно указать пол ("f" или "m") и скорость речи. Скорость речи может принимать значения от "0.1" до "3.0"; нормальная скорость речи "1.0".

{{Lang=de-DE;f}}

{{Lang=fr-FR;m;1.2}}

Для сервиса Naver TTS внутри тега можно указать скорость речи. Скорость речи может принимать значения от "0.5" до "1.5"; нормальная скорость речи "1.0".

{{Lang=en-US;0.8}}

Для сервиса Amazon Polly тег может содержать информацию о поле диктора ("f" или "m") или имени диктора.

{{Lang=de-DE;f}}

{{Lang=de-DE;Dieter}}

Для сервиса IBM Watson TTS можно указать имя голоса:

{{Lang=fr-FR;Nicolas}}

Для сервиса Microsoft Azure внутри тега можно указать пол ("f" или "m") или имя диктора, а также скорость речи. Скорость речи может принимать значения от "0.1" до "3.0"; нормальная скорость речи "1.0".

{{Lang=es-ES;m;1.4}}

{{Lang=es-ES;AlvaroNeural;2.0}}


*** Тег "Pause" ***

С помощью специального тега можно вставить паузу в звуковой файл. Длительность паузы должна быть указана в миллисекундах.

Тишина продлится две секунды. {{Pause=2000}} Затем чтение возобновится.


*** Лицензия ***

Коммерческое использование программы допускается только с разрешения правообладателя.

Запрещается использование программного продукта на компьютерах, принадлежащих органам государственной власти и органам местного самоуправления Российской Федерации, законодательным и судебным органам Российской Федерации, структурным подразделениям российских политических партий. Запрещается использование программного продукта на компьютерах, принадлежащих правоохранительным органам и федеральным службам Российской Федерации, Вооружённым силам Российской Федерации. Запрещается использование программы религиозными объединениями и организациями в Российской Федерации. Запрещается использование программного продукта внутри зданий, сооружений и помещений объектов религиозного назначения, а также внутри зданий, предназначенных для обучения религии. Запрещается использование программы в суворовских военных училищах, нахимовских военно-морских училищах, кадетских корпусах, кадетских классах образовательных учреждений. Запрещается использование программного продукта на компьютерах, принадлежащих "Всероссийскому ордена Трудового Красного Знамени обществу слепых", "Общероссийскому народному фронту", общероссийской общественно-государственной организации "Союз женщин России" и всероссийскому молодежному военно-патриотическому общественному движению "Юнармия". Запрещается использование программного продукта Общественной палатой РФ и региональными общественными палатами. Запрещается применение программного продукта российскими средствами массовой информации и коммуникации. Запрещается использование программы на компьютерах, находящихся в личном пользовании членов и сотрудников вышеперечисленных организаций, а также членов их семей. Запрещается использование программного продукта на территории Государства Эритрия, Исламской Республики Иран, Корейской Народно-Демократической Республики, Республики Беларусь, Республики Куба, Сирийской Арабской Республики, Чеченской Республики, а также на территории полуострова Крым.

###